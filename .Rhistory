ppl_sitjur %>% filter(anio > 1991)
View(ppl_sitjur)
ppl_sitjur %>% as.data.frame(filter(anio > 1991) )
ppl_sitjur %>% filter(anio > 1991) %>% as.data.frame()
ppl_sitjur %>% filter(anio > 1991)
ppl_sitjur %>% filter(anio > 1991) %>% class()
ppl_sitjur %>% filter(anio > 1991) %>% as.data.frame()
ppl_sitjur %>% as.data.frame()
ppl_sitjur <- cbind(ppl_sitjur,anio, mes) %>% filter(categoria %in% c("sindicados","condenados"))
View(ppl_sitjur)
ppl_sitjur <- cbind(ppl_sitjur,anio, mes)
View(ppl_sitjur)
ppl_sitjur %>%
filter(categoria %in% c("sindicados","condenados"))
library("dplyr")
filter(categoria %in% c("sindicados","condenados"))
dplyr::filter(categoria %in% c("sindicados","condenados"))
rm(list = ls())
library("magrittr")
library("dplyr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
library ("timeSeries")
library ("ggplot2")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_sitjur <- cbind(ppl_sitjur,anio, mes)
ppl_sitjur %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_sitjur %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, fill = categoria, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria == "total") %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
View(ppl_sitjur)
ppl_sitjur %>% filter (anio < 2016) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ppl_sitjur %>% filter (categoria == "gato")
filter (ppl_sitjur, categoria == "gato")
colnames(ppl_sitjur)
filter (ppl_sitjur, "categoria" == "gato")
colnames(ppl_sitjur)
filter (ppl_sitjur, categoria == "gato")
rm(list = ls())
rm(list = ls())
library("magrittr")
library("dplyr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
ppl_sitjur %>% filter (categoria == "gato")
filter> filter(mtcars, cyl == 8)
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
knitr::opts_chunk$set(echo = TRUE)
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
rm(list = ls())
library("magrittr")
library("dplyr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
ppl_sitjur %>% filter (categoria == "gato")
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
ppl_sitjur %>% filter (categoria == "gato")
filter(mtcars, cyl == 8)
knitr::opts_chunk$set(echo = TRUE)
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
ppl_sitjur %>% filter (categoria == "gato")
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
ppl_sitjur %>% filter (categoria == "gato")
ppl_sitjur %>% filter (anio > 2000)
View(ppl_sitjur)
ppl_sitjur %>% filter (anio > 2000)
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_sitjur <- cbind(ppl_sitjur,anio, mes)
ppl_sitjur %>% filter (anio > 2000)
ppl_sitjur %>% filter (categoria = 2000)
ppl_sitjur %>% filter (categoria == "gato")
View(ppl_sitjur)
filter(mtcars, cyl == 8)
mtcars
filter(mtcars, cyl == 8)
knitr::opts_chunk$set(echo = TRUE)
library("magrittr")
library("dplyr")
library("tidyr")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
ppl_sitjur %>% filter (categoria == "total") %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
```{r, echo=FALSE, include = FALSE}
# setwd("/home/sergio/Prisiones")
# rm(list=ls())
data = read.csv("POB_SIT.csv",header = FALSE,sep = ",",stringsAsFactors=FALSE)
POB = as.integer(c(unlist(data[2:13,2:dim(data)[2]])))
SIN = c(rep(c(rep(0,12),rep(1,12),rep(2,12)),900/36))
POB_SIN = cbind(POB,SIN)
SIND = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'sindicados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### CONDENADOS
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==1)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
#ggplot(yt.views, aes(Date, Views)) + geom_line() +
#  scale_x_date(format = "%b-%Y") + xlab("") + ylab("Daily Views")
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### TOTAL
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==2)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados")) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria, fill = categoria),stat = "identity") -> grafica
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
knitr::opts_chunk$set(echo = TRUE)
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
summary(cars)
plot(pressure)
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*100
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_sitjur <- cbind(ppl_sitjur,anio, mes)
# ppl_sitjur  %<>% spread(key = "categoria", value = valor)
ppl_sitjur %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados")) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria, fill = categoria),stat = "identity") -> grafica
ggplotly(grafica)
# setwd("/home/sergio/Prisiones")
# rm(list=ls())
data = read.csv("POB_SIT.csv",header = FALSE,sep = ",",stringsAsFactors=FALSE)
POB = as.integer(c(unlist(data[2:13,2:dim(data)[2]])))
SIN = c(rep(c(rep(0,12),rep(1,12),rep(2,12)),900/36))
POB_SIN = cbind(POB,SIN)
SIND = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'sindicados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### CONDENADOS
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==1)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
#ggplot(yt.views, aes(Date, Views)) + geom_line() +
#  scale_x_date(format = "%b-%Y") + xlab("") + ylab("Daily Views")
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### TOTAL
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==2)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria, fill = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, fill = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_bar(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") -> grafica
ggplotly(grafica)
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("personas privadas de la libertad")> grafica
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("personas privadas de la libertad")> grafica
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") > grafica
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") > grafica
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
ggplotly(grafica)
url <- "https://www.dropbox.com/s/95m8oziipdy6ely/PPL_GEN_ENE17.csv?dl=1"
destfile <- "POB_GEN_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_GEN_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
ppl_gen_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_gen <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
ppl_gen <- cbind(gather(ppl_gen_ene17)[2],rep(c(rep("hombres",12), rep("mujeres",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_gen) <- c("valor", "categoria")
ppl_gen$valor <- as.numeric(ppl_gen$valor)*100
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_gen <- cbind(ppl_gen,anio, mes)
View(ppl_gen)
ppl_gen %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_gen %>% filter (categoria %in% c("hombres","mujeres","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
ggplotly(grafica)
# Carga de archivos base Situación judicial
ppl_gen_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_gen <- cbind(gather(ppl_gen_ene17)[2],rep(c(rep("hombres",12), rep("mujeres",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_gen) <- c("valor", "categoria")
ppl_gen$valor <- as.numeric(ppl_gen$valor)*1000
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_gen <- cbind(ppl_gen,anio, mes)
# ppl_sitjur  %<>% spread(key = "categoria", value = valor)
ppl_gen %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_gen %>% filter (categoria %in% c("hombres","mujeres","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
ggplotly(grafica)
knitr::opts_chunk$set(echo = TRUE)
autoloads <- c("dplyr", "ggplot2", "Hmisc")
options(defaultPackages = c(getOption("defaultPackages"), autoloads))
summary(cars)
plot(pressure)
rm(list = ls())
library("magrittr")
library("tidyr")
library("reshape2")
library("ggplot2")
library("plotly")
library("zoo")
library("shiny")
library("curl")
# library ("timeSeries")
library ("ggplot2")
library("dplyr")
# Carga de archivos base
url <- "https://www.dropbox.com/s/epb2srm6pglyz9w/PPL_SITJUR_ENE17.csv?dl=1"
destfile <- "POB_SITJUR_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_SITJUR_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_sitjur_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_sitjur <- cbind(gather(ppl_sitjur_ene17)[2],rep(c(rep("sindicados",12), rep("condenados",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_sitjur) <- c("valor", "categoria")
ppl_sitjur$valor <- as.numeric(ppl_sitjur$valor)*1000
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_sitjur <- cbind(ppl_sitjur,anio, mes)
# ppl_sitjur  %<>% spread(key = "categoria", value = valor)
ppl_sitjur %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_sitjur %>% filter (categoria %in% c("sindicados","condenados","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
ggplotly(grafica)
# Carga de archivos base
url <- "https://www.dropbox.com/s/95m8oziipdy6ely/PPL_GEN_ENE17.csv?dl=1"
destfile <- "POB_GEN_INP_ENE17.csv"
curl_download(url, destfile)
data = read.csv("POB_GEN_INP_ENE17.csv",header = TRUE,sep = ",",stringsAsFactors=FALSE)
# Carga de archivos base Situación judicial
ppl_gen_ene17 <- (data[2:13,2:dim(data)[2]])
ppl_gen <- cbind(gather(ppl_gen_ene17)[2],rep(c(rep("hombres",12), rep("mujeres",12), rep("total",12)),dim(ppl_sitjur_ene17)[2]/3))
colnames(ppl_gen) <- c("valor", "categoria")
ppl_gen$valor <- as.numeric(ppl_gen$valor)*1000
anio <- sort(rep(seq(1991,1991+dim(ppl_sitjur_ene17)[2]/3-1,by =1),36))
mes <- rep(seq(1,12,1),dim(ppl_sitjur_ene17)[2])
ppl_gen <- cbind(ppl_gen,anio, mes)
# ppl_sitjur  %<>% spread(key = "categoria", value = valor)
ppl_gen %<>% mutate (fecha = as.Date(paste (1,mes,anio, sep = "/"),"%d/%m/%Y"))
ppl_gen %>% filter (categoria %in% c("hombres","mujeres","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
ggplotly(grafica)
# setwd("/home/sergio/Prisiones")
# rm(list=ls())
data = read.csv("POB_SIT.csv",header = FALSE,sep = ",",stringsAsFactors=FALSE)
POB = as.integer(c(unlist(data[2:13,2:dim(data)[2]])))
SIN = c(rep(c(rep(0,12),rep(1,12),rep(2,12)),900/36))
POB_SIN = cbind(POB,SIN)
SIND = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==0)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'sindicados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### CONDENADOS
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==1)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
#ggplot(yt.views, aes(Date, Views)) + geom_line() +
#  scale_x_date(format = "%b-%Y") + xlab("") + ylab("Daily Views")
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
####### TOTAL
MPP1 = subset(POB_SIN,POB_SIN[,"SIN"]==2)
MPP = MPP1[76:296,"POB"]
##### SERIES DE TIEMPO
#MPP = Male Prison Population
MPPtimeseries <- ts(MPP, frequency=12, start=c(1991,1))
logMMPtimeseries <- log(MPPtimeseries)
plot.ts(diff(logMMPtimeseries))
DeltaMPP = decompose(diff(logMMPtimeseries))
plot(DeltaMPP)
# ggplot(DeltaMPP)
write.csv(DeltaMPP$trend, file = 'condenados.txt', row.names = TRUE)
# Crecimiento promedio
mean(DeltaMPP$trend,na.rm = TRUE)*100
ppl_gen %>% filter (categoria %in% c("hombres","mujeres","total"), valor >0) %>%  ggplot() + geom_line(aes(x=fecha,y = valor, colour = categoria),stat = "identity") + ylab("Personas privadas de la libertad")-> grafica
grafica
grafica
ggplotly(grafica)
